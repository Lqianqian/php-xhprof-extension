language: php

notifications:
  email: false

os: linux
arch:
  - x86_64
  - s390x

php:
  - 7.2
  - 7.3
  - 7.4
  - 8.0
  - 8.1

env:
  global:
    - TEST_PHP_ARGS="-q"
    - REPORT_EXIT_STATUS=1

before_install:
    - sudo apt-get update
    - sudo apt-get -y install libcurl4-openssl-dev
    - if [[ $VERSION =~ ^8.1 ]]; then sudo apt-get -y install argon2 libargon2-0 libargon2-0-dev; fi

before_script:
  - cd extension
  - phpize
  - ./configure
  - make clean
  - make

script:
  - ../travis/run-test.sh
